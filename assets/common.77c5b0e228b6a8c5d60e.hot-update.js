webpackHotUpdate("common",{

/***/ "./js/middleware/index.js":
/*!********************************!*\
  !*** ./js/middleware/index.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./js/const/index.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common */ \"./js/common/index.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n\n\nvar resultTimeout = null,\n    offsetTimeout = null;\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (store) {\n  return function (next) {\n    return function (action) {\n      var type = action.type,\n          payload = action.payload,\n          rest = _objectWithoutProperties(action, [\"type\", \"payload\"]);\n\n      var sound = store.getState().sound;\n\n      switch (type) {\n        case _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].LOAD_SOUND:\n          if (sound.get(\"state\") === \"empty\") {\n            next(action);\n            sound.get(\"mode\").loadAll(payload.urls).addListener(\"loaded\", function () {\n              return next(_objectSpread({}, rest, {\n                payload: payload,\n                type: type + _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].READY\n              }));\n            }).addListener(\"progress\", function (percents, count) {\n              return next(_objectSpread({}, rest, {\n                payload: {\n                  percents: percents,\n                  count: count\n                },\n                type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].PROGRESS\n              }));\n            });\n          }\n\n          break;\n\n        case _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].KEY_DOWN:\n          sound.get(\"mode\").keyDown(payload.index);\n          next(action);\n          break;\n\n        case _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].KEY_UP:\n          sound.get(\"mode\").keyUp(payload.index);\n          next(action);\n          break;\n\n        case _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_SELECT:\n          next({\n            type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_HIDE_TOTAL\n          });\n          sound.get(\"mode\").select(payload.select);\n          Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"timeout\"])(resultTimeout);\n          Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"timeout\"])(offsetTimeout);\n          next({\n            type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_SHOW_RESULT\n          });\n          resultTimeout = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"timeout\"])(2500, function () {\n            next({\n              type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_HIDE_RESULT\n            });\n          });\n          break;\n\n        case _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_PLAY:\n          next({\n            type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_HIDE_TOTAL\n          });\n          sound.get(\"mode\").play(payload.value);\n          Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"timeout\"])(resultTimeout);\n          Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"timeout\"])(offsetTimeout);\n          next({\n            type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_HIDE_RESULT\n          });\n          break;\n\n        case _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].SET_MODE:\n          next(action);\n          next({\n            type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_COUNT,\n            payload: {\n              count: 0\n            }\n          });\n          next({\n            type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CLEAR_SCROLL\n          });\n          store.getState().sound.get(\"mode\").addListener(\"counter\", function (count) {\n            next({\n              type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_COUNT,\n              payload: {\n                count: count\n              }\n            });\n          }).addListener(\"finish\", function (result) {\n            setTimeout(function () {\n              next({\n                type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_COUNT,\n                payload: {\n                  count: 0\n                }\n              });\n              next({\n                type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].MODE_SHOW_TOTAL,\n                payload: {\n                  result: result\n                }\n              });\n            }, 300);\n          }).addListener(\"offset\", function (value) {\n            next({\n              type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].SCROLL_TEMP,\n              payload: {\n                value: value\n              }\n            });\n            Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"timeout\"])(offsetTimeout);\n            offsetTimeout = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"timeout\"])(2500, function () {\n              next({\n                type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CLEAR_SCROLL\n              });\n            });\n          });\n          break;\n\n        case _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].SET_SIZE:\n          next({\n            type: _const__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CLEAR_SCROLL\n          });\n          next(action);\n          break;\n\n        default:\n          return next(action);\n      }\n    };\n  };\n});\n\n//# sourceURL=webpack:///./js/middleware/index.js?");

/***/ })

})